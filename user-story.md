# User story

> ## Application name

`voter`

---

> ## Description

Приложение предназначено для создания платформы проведения опросов и голосования.
С помощью приложения пользователи могут создавать опросы и голосования по любому вопросу среди других пользователей. Опрос или голосование состоит из текстового вопроса и нескольких ваниантов ответа на него. Пользователи могут посмотреть список всех опросов с разделение на проголосованные опросы и не проголосованные опросы. По проголосованным опросам каждый пользователь может посмотреть суммарные результаты голосования с разбиением голосов по вариантам ответов. Результаты голосования отображаются в виде числе и столблцовых диаграмм.

---

> ## Pages

При открытии сайта проверяется, вошел пользователь в систему или нет. Если пользователь вошел, то идет перенаправление на `Dashboard page`. Если пользователь не вошел, то идет перенаправление на `Signin page`.

1.  ### `Signin page` - страница входа в приложение.

    На этой странице отображаются поля ввода `Email`, `Password` и кнопка `Sign in`.
    Ниже кнопки `Sign in` находится ссылка перехода на страницу регистрации `Signup page`.
    По нажатию на кнопку `Sign in` отправляется запрос на backend. Если `email` и `password` правильно введены, то backend возвращает `JWT`, который в дальнейшем используется для запросов к backend. Если `email` и `password` не правильно введены, то backend возвращает ответ с указанием на ошибку и на странице `Signin page` показвается сообщение об ошибочном вводе. После получения `JWT`, он сохраняется в local storage, а затем идет перенаправление на страницу `Dashboard page`.

2.  ### `Signup page` - страница регистрации в приложении.

    На этой странице отображаются поля ввода `Email`, `Password`, `Repeat Password` и кнопка `Sign up`.
    Ниже кнопки `Sign up` находится ссылка перехода на страницу входа в приложение `Signin page`.
    По нажатию на кнопку `Sign up` отправляется запрос на backend. Backend формирует письмо, с однократным кодом регистрации и отправляет его на указанный email (в учебном варианте ссылка выводится в консоли работающего backend'а). Пользователь открывает в почтовом клиенте письмо и нажимает на ссылку в письме с кодом регистрации (в учебном варианте пользователь открываетс ссылку в консоли работающего backend'а). Ссылка ведет на frontend на страницу `Email verification page`.

3.  ### `Email verification page` - страница проверки email при регистрации в приложении.

    На этой странице отображаются поля ввода `Email` без возможности редактирования, скрытое поле с кодом регистрации и кнопка `Verify email`.
    Ниже кнопки `Verify email` находится ссылка перехода на страницу входа в приложение `Signin page`.
    По нажатию на кнопку `Verify email` отправляется запрос на backend с email и кодом регистрации. Backend проверяет email и код регистрации, и в случае успеха возвращает JWT. Далее действия производятся аналогично `Signin page`. Если ответ от backend отрицательный, то выдается сообщению пользователю об ощибке проверки email.

4.  ### `Dashboard page` - основная страница приложения.

    На основной странице отображается кнопка создания нового опроса, селектор списка отображаемых опросов, список не проголосованных/проголосованных опросов. Селектор представляет собой две надписи, одна из которых подсвечена в случае, если она выбрана. выбор осуществяется по клику мышью на ней. После изменения состояния селектора должно изменятся содержимое списка опросов. Список опросов представляет совой вертикальный перечень, состоящий их текстовых надписей. Нажатие на текст вопроса в списке осуществляет переход на страницу отображения соответствующего опроса.

    В верхней части `Dashboard page` отображается иконка с изображением фотографии пользователя или placeholder-картинка, если пользователем не задана фотография. По нажатию на эту иконку появляется dropdown-меню с пунктом `Sign out`. Нажатие на пункт меню `Sign out` осуществляет сброс состояния текущего пользователя и JWT, и идет перенаправление на страницу `Sign in page`. Слева от иконки располагается надпись, отображающая email зарегистрированного в приложении пользователя.

    В левой части `Dashboard page` отображается sidebar с перечнем страниц. Нажатие на название страницы приводит к переключению текущей отображаемой страницы.

    Перечень страниц в меню:

    - `Dashboard`;
    - `Poll`;
    - `Create`.

5.  ### `Create` - страница создания нового опроса.

    На странице в верхней части располагается поле ввода текста вопроса. Далее, ниже от тескта вопроса находится список вариантов ответов. В списке справа от текста ответа располагаются кнопки со стрелками вверх и вниз, а также кнопка с изображением `x`. Нажатие на кнопки со стрелками вверх и вниз перемещает ответ по списку соответственно. Нажатие на кнопку с изображением `x` вызывает появление подтверждения удаления ответа и затем после успешного подтверждения ответ удаляется. Нажатие на текст ответа открывает модальный диалог для редактирования этого текста. Ниже списка ответов находится кнопка `Add response`, нажатие на которую создает пустой ответ без текста и помещает его в конец списка ответов.

    В верхней части `Create` отображается иконка с изображением фотографии пользователя или placeholder-картинка, если пользователем не задана фотография. По нажатию на эту иконку появляется dropdown-меню с пунктом `Sign out`. Нажатие на пункт меню `Sign out` осуществляет сброс состояния текущего пользователя и JWT, и идет перенаправление на страницу `Sign in page`. Слева от иконки располагается надпись, отображающая email зарегистрированного в приложении пользователя.

6.  ### `Poll` - страница отображения опроса.

    Отображаются текст вопроса и результаты опроса в виде таблицы. В первой колонке таблицы отображается вариант ответа, во второй колонке от ображается число проголосовавших за данный вариант ответа, в третьей колонке отображается горизонтальная полоса пропорциональная количеству проголосовавших за данный вариант ответа. Вариант ответа, за который проголосовал пользователь должен отображаться теском со стилем "жирный". Если пользователь не проголосовал опрос, то нажатие на любой из вариантов ответов мышью осуществяет выбор пользователя, и после этого результаты опроса изменяются и отображаются с учетом выбора пользователя.

    В верхней части `Poll` отображается иконка с изображением фотографии пользователя или placeholder-картинка, если пользователем не задана фотография. По нажатию на эту иконку появляется dropdown-меню с пунктом `Sign out`. Нажатие на пункт меню `Sign out` осуществляет сброс состояния текущего пользователя и JWT, и идет перенаправление на страницу `Sign in page`. Слева от иконки располагается надпись, отображающая email зарегистрированного в приложении пользователя.
